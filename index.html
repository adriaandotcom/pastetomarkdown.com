<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Quick and easy markdown conversion with paste to markdown</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <script src="./turndown-7.1.1.js"></script>
    <script src="./turndown-plugin-gfm-1.0.2.js"></script>

    <!-- 100% privacy friendly analytics -->
    <script
      async
      data-hostname="pastetomarkdown.com"
      src="https://scripts.simpleanalyticscdn.com/latest.js"
    ></script>

    <!-- SEO -->
    <meta
      name="description"
      content="Convert formatted text into markdown language easily. Simply paste your text and our converter will quickly convert it into markdown. Our converter is fast, easy to use, and completely free. Give it a try and see how it can help you format your text with ease."
    />
  </head>
  <body>
    <header>
      <svg
        width="400"
        height="400"
        viewBox="0 0 400 400"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="200" cy="200" r="200" style="fill: var(--logo-color)" />
        <path d="M132.414 201.448H100V298.69H132.414V201.448Z" fill="white" />
        <path
          d="M210.206 143.103H177.793V298.69H210.206V143.103Z"
          fill="white"
        />
        <path d="M288 88H255.586V298.69H288V88Z" fill="white" />
      </svg>

      <h1>Paste to markdown</h1>
      <p>
        Quick and easy markdown conversion with paste to markdown.<br />
        Also available for
        <a href="/convert-google-docs-documents-to-markdown.html"
          >Google Docs</a
        >
        and
        <a href="/convert-microsoft-word-documents-to-markdown.html"
          >Microsoft Word</a
        >. <a href="/why-you-should-use-paste-to-markdown.html">Why?</a>
      </p>
    </header>

    <main>
      <p>CMD + V to paste your HTML and get Markdown in return!</p>
      <div id="paste" contenteditable="true" spellcheck="false">Paste</div>
      <textarea id="markdown" spellcheck="false"></textarea>
    </main>

    <a
      id="badge"
      href="https://simpleanalytics.com/pastetomarkdown.com?utm_source=pastetomarkdown.com&utm_content=badge"
      referrerpolicy="origin"
      target="_blank"
      ><picture
        ><source
          srcset="
            https://simpleanalyticsbadges.com/pastetomarkdown.com?mode=dark
          "
          media="(prefers-color-scheme: dark)" />
        <img
          src="https://simpleanalyticsbadges.com/pastetomarkdown.com?mode=light"
          loading="lazy"
          referrerpolicy="no-referrer"
          crossorigin="anonymous" /></picture
    ></a>

    <!-- 100% privacy friendly analytics -->
    <noscript>
      <img
        src="https://queue.simpleanalyticscdn.com/noscript.gif"
        alt=""
        referrerpolicy="no-referrer-when-downgrade"
      />
    </noscript>
  </body>

  <script>
    const pasteElement = document.getElementById("paste");
    const markdownElement = document.getElementById("markdown");

    const turndownOptions = {
      headingStyle: "atx",
      bulletListMarker: "-",
      codeBlockStyle: "fenced",
      fence: "```",
      emDelimiter: "_",
      strongDelimiter: "**",
      linkStyle: "inlined",
      linkReferenceStyle: "full",
    };

    const gfm = turndownPluginGfm.gfm;
    const turndownService = new TurndownService(turndownOptions);
    turndownService.use(gfm);

    document.addEventListener("keydown", (event) => {
      if (event.ctrlKey || event.metaKey) {
        if (String.fromCharCode(event.which).toLowerCase() === "v") {
          pasteElement.innerHTML = "";
          pasteElement.focus();
        }
      }
    });

    pasteElement.addEventListener("paste", (event) => {
      setTimeout(() => {
        const html = pasteElement.innerHTML.replace(
          /(<span style="[^"]*font-weight:[ ]*(?:bold|[6-9]00)[^"]*">)(.*?)(<\/span>)/gi,
          "$1<strong>$2</strong>$3"
        );

        let markdown = turndownService.turndown(html);

        const lines = markdown.split("\n");

        // Remove empty lines
        markdown = lines.map((line) => line.trim()).join("\n");

        // Remove double line breaks
        markdown = markdown.replace(/\n\n(\n)+/g, "\n\n");

        // Remove new lines between list items
        markdown = markdown.replace(/(\n)+(\s)*(-|\*)(\s)/g, "\n$2$3$4");

        // Add new line on top of list
        markdown = markdown.replace(/(:)(\n)+(-|\*)(\s)/g, "$1\n\n$3$4");

        // Remove new lines from start and end
        markdown = markdown.trim();

        markdownElement.style.display = "block";
        markdownElement.innerHTML = markdown + "\n";

        markdownElement.focus();
        markdownElement.select();

        console.log("html:");
        console.log(html);
        console.log();
        console.log("markdown:");
        console.log(markdown);

        document.body.classList.add("has-markdown");
      }, 250);
    });
  </script>
</html>
